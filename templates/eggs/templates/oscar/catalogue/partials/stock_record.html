{% load currency_filters %}
{% load i18n %}
{% load purchase_info_tags %}

{% purchase_info_for_product request product as session %}

{% if session.price.exists %}
    {% if session.price.excl_tax == 0 %}
        <p class="price_color">{% trans "Free" %}</p>
    {% elif session.price.is_tax_known %}
        {% if product.sale_price %}
            <p class="price_color">
                <span class="text-muted"><s>{{ product.regular_price|currency:session.price.currency }}</s></span>
                <span>{{ product.sale_price|currency:session.price.currency }}</span>
            </p>
        {% else %}
            <p class="price_color">{{ session.price.excl_tax|currency:session.price.currency }}</p>
        {% endif %}
    {% else %}
        <p class="price_color">{{ session.price.excl_tax|currency:session.price.currency }}</p>
    {% endif %}
{% else %}
    <p class="price_color">&nbsp;</p>
{% endif %}
